"use strict";const TRANSITION_NEXT_PAGE_TIME=2e3,ANIMATION_POPUP_TIME=3e3,questionFirst=document.querySelector("#question-1"),questionSecond=document.querySelector("#question-2"),questionThird=document.querySelector("#question-3"),questionFourth=document.querySelector("#question-4"),questionFifth=document.querySelector("#question-5"),popupLoader=document.querySelector(".popup-loader"),mainDescriptionTop=document.querySelector(".description__top-wrap"),mainDescriptionBottom=document.querySelector(".description__bottom-wrap"),questionFirstWrap=document.querySelector(".content-page__main-question--bottom"),footer=document.querySelector(".footer"),anchorButton=document.querySelector('a[href="#question-1"]'),popupMicrophone=document.querySelector(".popup-loader--microphone"),progressBar=document.querySelector(".popup-loader__progress"),percentBar=document.querySelector(".popup-loader__percent"),callButton=document.querySelector("#call"),cardTemplate=document.querySelector("#card"),footerNote=document.querySelector(".note"),tommorowDay=document.querySelector(".tomorrow-day"),isVisible=e=>{const t=e.getBoundingClientRect(),o=document.documentElement.clientHeight,r=t.top>0&&t.top<o,n=t.bottom<o&&t.bottom>0;return r||n},showAnimation=e=>()=>{isVisible(e)&&(e.style.animationName="opacity",e.style.animationDuration="5s",e.style.animationFillMode="forwards")};mainDescriptionTop&&window.addEventListener("scroll",showAnimation(mainDescriptionTop)),mainDescriptionBottom&&window.addEventListener("scroll",showAnimation(mainDescriptionBottom)),questionFirstWrap&&window.addEventListener("scroll",showAnimation(questionFirstWrap)),footer&&window.addEventListener("scroll",showAnimation(footer)),anchorButton&&anchorButton.addEventListener("click",e=>{e.preventDefault();const t=anchorButton.getAttribute("href");console.log(t),document.querySelector(t).scrollIntoView({behavior:"smooth",block:"start"})});const onButtonClick=e=>t=>{t.preventDefault(),popupLoader.style.display="flex",setTimeout(()=>{document.location.href=e},2e3),setTimeout(()=>{popupLoader.style.display="none"},3e3)};if(questionFirst&&questionFirst.addEventListener("click",onButtonClick("question-2.html")),questionSecond&&questionSecond.addEventListener("click",onButtonClick("question-3.html")),questionThird&&questionThird.addEventListener("click",onButtonClick("question-4.html")),questionFourth&&questionFourth.addEventListener("click",onButtonClick("question-5.html")),questionFifth&&questionFifth.addEventListener("click",onButtonClick("answer.html")),popupMicrophone){const e=(e,t)=>{setTimeout(()=>{t(percentBar.textContent=e)},600)},t=t=>new Promise(o=>{e(t,o)});t("20%").then(()=>t("40%")).then(()=>t("60%")).then(()=>t("80%")).then(()=>t("100%"))}if(callButton){const e=cardTemplate.content.querySelector(".popup-card"),t=e=>{const t=document.createDocumentFragment();return e.forEach(e=>{const o=document.createElement("li"),r=document.createElement("a");o.classList.add("popup-card__sub-item"),r.classList.add("popup-card__film"),r.href=e,r.textContent=e,o.appendChild(r),t.appendChild(o)}),t},o=e=>{const t=document.createDocumentFragment();return e.forEach(e=>{const o=document.createElement("li");o.classList.add("popup-card__sub-item","popup-card__sub-item--species"),o.textContent=e,t.appendChild(filmElement)}),t},r=e=>{const t=document.createDocumentFragment();return e.forEach(e=>{const o=document.createElement("li"),r=document.createElement("a");o.classList.add("popup-card__sub-item"),r.classList.add("popup-card__vehicle"),r.href=e,r.textContent=e,o.appendChild(r),t.appendChild(o)}),t},n=e=>{const t=document.createDocumentFragment();return e.forEach(e=>{const o=document.createElement("li"),r=document.createElement("a");o.classList.add("popup-card__sub-item"),r.classList.add("popup-card__starship"),r.href=e,r.textContent=e,o.appendChild(r),t.appendChild(o)}),t},c=()=>{const e=document.createElement("div");return e.style.position="absolute",e.style.top="0",e.style.bottom="0",e.style.left="0",e.style.right="0",e.style.backgroundColor="#202024",e.style.opacity="0.9",e},i=i=>{const{name:a,height:s,mass:p,hair_color:l,skin_color:u,eye_color:d,birth_year:m,gender:h,homeworld:_,films:y,species:q,vehicles:S,starships:f,created:C,edited:g,url:E}=i,w=document.querySelector(".page__body"),L=e.cloneNode(!0);L.querySelector(".popup-card__title").textContent=a,L.querySelector(".popup-card__parameter--height").textContent=`Height: ${s} cm`,L.querySelector(".popup-card__parameter--mass").textContent=`Weight: ${p} kg`,L.querySelector(".popup-card__parameter--hair-color").textContent="Hair color: "+l,L.querySelector(".popup-card__parameter--skin-color").textContent="Skin color: "+u,L.querySelector(".popup-card__parameter--eye-color").textContent="Eye color: "+d,L.querySelector(".popup-card__parameter--birth-year").textContent="Birth year: "+m,L.querySelector(".popup-card__parameter--gender").textContent="Gender: "+h,L.querySelector(".popup-card__homeworld").href=_,L.querySelector(".popup-card__homeworld").textContent=_,L.querySelector(".popup-card__sub-list--films").innerHTML="",L.querySelector(".popup-card__sub-list--films").appendChild(t(y)),L.querySelector(".popup-card__sub-list--species").innerHTML="",L.querySelector(".popup-card__sub-list--species").appendChild(o(q)),0===q.length&&(L.querySelector(".popup-card__parameter--species").style.display="none"),L.querySelector(".popup-card__sub-list--vehicles").innerHTML="",L.querySelector(".popup-card__sub-list--vehicles").appendChild(r(S)),L.querySelector(".popup-card__sub-list--starships").innerHTML="",L.querySelector(".popup-card__sub-list--starships").appendChild(n(f)),L.querySelector(".popup-card__time--created").dateTime=C,L.querySelector(".popup-card__time--created").textContent=new Date(C).toString(),L.querySelector(".popup-card__time--edited").dateTime=g,L.querySelector(".popup-card__time--edited").textContent=new Date(g).toString(),L.querySelector(".popup-card__url").href=E,L.style.position="fixed",L.style.top="50%",L.style.left="50%",L.style.transform="translate(-50%, -50%)",L.style.maxHeight="50%",L.style.overflowY="auto";const b=w.appendChild(c());w.appendChild(L),b.addEventListener("click",e=>{e.target!==L&&(L.remove(),b.remove())})},a=e=>fetch("https://swapi.dev/api/people/1/").then(e=>{if(e.ok)return e.json();throw Error("Не удалось получить данные")}).then(t=>{e(t)});callButton.addEventListener("click",e=>{e.preventDefault(),a(e=>{i(e)}).catch(e=>console.log("Error:",e.message,e.stack))})}if(footerNote&&(footerNote.style.cursor="pointer",footerNote.classList.add("note--hidden"),footerNote.addEventListener("click",()=>{footerNote.classList.toggle("note--hidden")})),tommorowDay){const e=new Date,t=new Date(e.setDate(e.getDate()+1)),o=t.getMonth()<10?"0"+(t.getMonth()+1):""+(t.getMonth()+1);tommorowDay.textContent=`${t.getDate()}.${o}.${t.getFullYear()}`}